
load('nashorn:mozilla_compat.js');
importPackage(Packages.client);
importPackage(Packages.tools);

var f1 = [20000,20001,20002,20003,20004,20005,20006,20007,20008,20009,20010,20011,20012,20013,20014,20015,20016,20017,20018,20019,20020,20021,20022,20023,20024,20025,20026,20027,20028,20029,20030,20031,20032,20033,20035,20036,20037,20038,20040,20041,20042,20043,20044,20045,20046,20047,20048,20049,20050,20051,20052,20053,20054,20055,20056,20057,20058,20059,20060,20061,20062,20063,20064,20065,20066,20067,20068,20069,20070,20071,20072,20073,20074,20075,20076,20077,20078,20079,20080,20081,20082,20083,20084,20085,20086,20087,20088,20089,20090,20091,20092,20093,20094,20095,20096,20097,20098,20099,21000,21001,21002,21003,21004,21005,21006,21007,21008,21009,21010,21011,21012,21013,21014,21015,21016,21017,21018,21019,21020,21021,21022,21023,21024,21025,21026,21027,21028,21029];
var f2 = [21030,21031,21033,21034,21035,21036,21038,21039,21040,21041,21042,21043,21044,21045,21046,21047,21048,21049,21050,21051,21052,21053,21054,21055,21056,21057,21058,21059,21060,21061,21062,21063,21064,21065,21066,21067,21068,21069,21070,21071,21072,21073,21074,21075,21076,21077,21078,21079,21080,21081,21082,21083,21084,21085,21086,21087,21088,21089,21090,21091,21092,21093,21094,21095,21096,21097,21098,21099,23000,23001,23002,23003,23004,23005,23006,23008,23009,23010,23011,23012,23013,23014,23015,23016,23017,23018,23019,23020,23021,23023,23024,23025,23026,23027,23028,23029,23031,23032,23033,23034,23035,23036,23037,23038,23039,23040,23041,23042,23043,23044,23045,23046,23047,23048,23051,23053,23054,23056,23057,23060,23061,23062,23063,23065,23066,23067,23068,23069];
var f3 = [23072,23073,23074,23075,23079,23080,23081,23082,23083,23084,23085,23086,23087,23088,23089,23090,23091,23092,23095,23096,23097,23098,23099,24001,24002,24003,24004,24005,24006,24007,24008,24009,24010,24011,24012,24013,24014,24015,24016,24018,24019,24020,24022,24024,24026,24027,24028,24029,24031,24033,24034,24035,24036,24037,24038,24039,24040,24041,24042,24043,24044,24045,24048,24050,24051,24054,24055,24058,24059,24060,24061,24062,24063,24064,24065,24066,24067,24068,24071,24072,24073,24074,24075,24076,24077,24078,24079,24080,24081,24082,24083,24084,24085,24086,24087,24088,24091,24092,24093,24094,24095,24096,24097,24098,24099,25000,25001,25003,25004,25005,25006,25007,25008,25009,25010,25011,25012,25013,25014,25015,25016,25017,25018,25019,25020,25021,25022,25023];
var f4 = [25024,25025,25026,25027,25028,25029,25030,25031,25032,25033,25034,25035,25036,25037,25038,25039,25040,25041,25042,25043,25044,25045,25046,25047,25048,25049,25050,25051,25052,25053,25054,25055,25056,25057,25058,25059,25060,25061,25062,25063,25069,25070,25071,25072,25073,25074,25075,25076,25077,25078,25079,25080,25083,25084,25085,25088,25089,25090,25091,25093,25095,25096,25097,25098,25099,26000,26003,26004,26005,26006,26007,26008,26009,26010,26011,26012,26013,26014,26015,26016,26017,26018,26019,26020,26021,26022,26023,26024,26025,26026,26027,26028,26029,26030,26031,26032,26033,26034,26035,26036,26037,26038,26039,26040,26041,26042,26043,26044,26045,26046,26047,26048,26049,26050,26051,26052,26053,26054,26055,26056,26057,26058,26059,26060,26061,26062,26063,26064];
var f5 = [26065,26066,26067,26073,26074,26075,26076,26077,26078,26079,26080,26081,26082,26083,26084,26085,26086,26089,26090,26091,26094,26095,26096,26097,26099,27000,27001,27002,27003,27004,27005,27006,27007,27008,27009,27010,27011,27012,27013,27014,27015,27016,27017,27018,27019,27020,27021,27022,27023,27024,27025,27026,27027,27028,27029,27030,27031,27032,27033,27034,27035,27036,27037,27038,27039,27040,27041,27044,27045,27046,27047,27048,27049,27050,27051,27052,27053,27054,27055,27056,27057,27058,27059,27060,27061,27062,27063,27064,27065,27066,27067,27068,27069,27070,27071,27072,27073,27074,27075,27076,27077,27078,27079,27080,27081,27082,27083,27084,27085,27086,27087,27088,27089,27090,27091,27092,27093,27094,27095,27096,27098,27099,28000,28001,28002,28003,28004,28005];
var f6 = [28006,28007,28008,28009,28010,28011,28012,28013,28014,28015,28016,28017,28019,28020,28021,28022,28023,28024,28025,28026,28027,28028,28029,28030,28032,28033,28034,28035,28036,28037,28038,28039,28040,28041,28042,28043,28044,28045,28046,28049,28050,28051,28052,28053,28054,28055,28056,28057,28058,28059,28060,28061,28062,28063,28064,28065,28066,28067,28068,28069,28070,28071,28072,28073,28074,28075,28076,28078,28079,28080,28081,28082,28083,28084,28085,28086,28087,28088,28089,28090,28091,28092,28093,28094,28095,28096,28097,28098,28099];



var icon1 = "#fEffect/ItemEff/004/0#"; //黃驚嘆
var icon5 = "#fEffect/ItemEff/0/10#";
var icon2 = "#fUI/UIWindow/Quest/icon1#"; //灰驚嘆
var icon3 = "#fEffect/ItemEff/004/1#";
var icon4 = "#fUI/UIWindow/Quest/icon7/8#"; //限時
var cake = "#fEffect/ItemEff/0/9#";
var get = "#fEffect/ItemEff/004/3#";
var need = "#fEffect/ItemEff/004/4#";

var status = -1;

function action(mode, type, selection) {
    if (mode == 1) {
        status++;
    } else {
        status--;
    }
	if(mode == 0){
		status = 0;
	}
	
    if (status == 0) {
		var msg = ""
		msg += "          " + icon5 + " #e#d【眼型專區】#k #r更換皆為免費#k#n\r\n\r\n";
		msg += "   " + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake+ "" + cake + "" + cake + "" + cake + "" + cake +  "  \r\n";
		msg += "  #L99#" + need + "#d快速查詢#k#l  #L999#" + need + " #d離開頁面#k#l  #L9999#" + need + " #d回造型區#k#l\r\n\r\n";
		msg += "   " + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake + "" + cake+ "" + cake + "" + cake + "" + cake + "" + cake +  "  \r\n#e";
		msg += "#L0#" + icon3 + " #b眼1#k#l ";
		msg += "#L1#" + icon3 + " #b眼2#k#l ";
		msg += "#L2#" + icon3 + " #b眼3#k#l\r\n";
		msg += "#L3#" + icon3 + " #b眼4#k#l ";
		msg += "#L4#" + icon3 + " #b眼5#k#l ";
		msg += "#L5#" + icon3 + " #b眼6#k#l #n";
		cm.sendSimple(msg);
	}else if(status == 1){
		this. s = selection;
		if(s == 99){
			cm.sendGetNumber("#d請輸入查詢的眼型代碼#k",0,0,9999999);
		}else if(s == 999){
			cm.dispose();
		}else if(s == 9999){
			cm.dispose();
			cm.openNpc(9010000,"造型專區");
		}else if(s == 0){
			cm.sendStyle("#d選一個喜歡的眼型吧!#k\r\n#r更換所有眼型都是免費!#k\r\n#b快速搜尋特定眼型請至造型區#k",f1);
		}else if(s == 1){
			cm.sendStyle("#d選一個喜歡的眼型吧!#k\r\n#r更換所有眼型都是免費!#k\r\n#b快速搜尋特定眼型請至造型區#k",f2);
		}else if(s == 2){
			cm.sendStyle("#d選一個喜歡的眼型吧!#k\r\n#r更換所有眼型都是免費!#k\r\n#b快速搜尋特定眼型請至造型區#k",f3);
		}else if(s == 3){
			cm.sendStyle("#d選一個喜歡的眼型吧!#k\r\n#r更換所有眼型都是免費!#k\r\n#b快速搜尋特定眼型請至造型區#k",f4);
		}else if(s == 4){
			cm.sendStyle("#d選一個喜歡的眼型吧!#k\r\n#r更換所有眼型都是免費!#k\r\n#b快速搜尋特定眼型請至造型區#k",f5);
		}else if(s == 5){
			cm.sendStyle("#d選一個喜歡的眼型吧!#k\r\n#r更換所有眼型都是免費!#k\r\n#b快速搜尋特定眼型請至造型區#k",f6);
		}
	}else if(status == 2){
		this. p = selection;
		if(s == 99){
			if(!HairFaceDump.faceExists(p)){
				cm.sendOk("#d您輸入的代碼 :#k #r" + p + "#k #d並無對應眼型");
				status = -1;
			}else{
				this. x = Array();
				x.push(p);
				cm.sendStyle("#d您搜尋的代碼 :#k #b" + p + "#k\r\n#r請確認是否為以下眼型#k",x);
				
			}
		}else if(s == 0){
			cm.getPlayer().setFace(f1[p]);
			cm.getPlayer().updateSingleStat(MapleStat.FACE, f1[p]);
		}else if(s == 1){
			cm.getPlayer().setFace(f2[p]);
			cm.getPlayer().updateSingleStat(MapleStat.FACE, f2[p]);
		}else if(s == 2){
			cm.getPlayer().setFace(f3[p]);
			cm.getPlayer().updateSingleStat(MapleStat.FACE, f3[p]);
		}else if(s == 3){
			cm.getPlayer().setFace(f4[p]);
			cm.getPlayer().updateSingleStat(MapleStat.FACE, f4[p]);
		}else if(s == 4){
			cm.getPlayer().setFace(f5[p]);
			cm.getPlayer().updateSingleStat(MapleStat.FACE, f5[p]);
		}else if(s == 5){
			cm.getPlayer().setFace(f6[p]);
			cm.getPlayer().updateSingleStat(MapleStat.FACE, f6[p]);
		}else if(s == 6){
			cm.getPlayer().setFace(h7[p]);
			cm.getPlayer().updateSingleStat(MapleStat.FACE, h7[p]);
		}else if(s == 7){
			cm.getPlayer().setFace(h8[p]);
			cm.getPlayer().updateSingleStat(MapleStat.FACE, h8[p]);
		}else if(s == 8){
			cm.getPlayer().setFace(h9[p]);
			cm.getPlayer().updateSingleStat(MapleStat.FACE, h9[p]);
		}else if(s == 9){
			cm.getPlayer().setFace(f10[p]);
			cm.getPlayer().updateSingleStat(MapleStat.FACE, f10[p]);
		}else if(s == 10){
			cm.getPlayer().setFace(f11[p]);
			cm.getPlayer().updateSingleStat(MapleStat.FACE, f11[p]);
		}
		if(s!=99){
		    cm.sendOk("#d成功變換眼型! 希望你會喜歡!#k");
		    cm.dispose();
		}		
	}else if(status == 3){
		if(s == 99){
			cm.getPlayer().setFace(p);
			cm.getPlayer().updateSingleStat(MapleStat.FACE, p);
			cm.sendOk("#d成功變換眼型! 希望你會喜歡!#k");
		    cm.dispose();
		}
	}
}